<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>myMemoPad</title>
    <script src="./js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <h1>★★お買い物Note★★</h1>

    <main>
        <div class="input-area">
            <input id="title" type="text" placeholder="項目を選択">
            <textarea id="product" placeholder="商品名を入力"></textarea>
            <textarea id="price" placeholder="価格(税込み)を入力"></textarea>
            <textarea id="store" placeholder="店名を入力"></textarea>
            <textarea id="memo" placeholder="memoを入力"></textarea>
        </div>

        <div class="button-area">
            <button id="save">Save</button>
            <button id="clear">Clear</button>
            <button id="search">Search</button>
        </div>
    </main>

    <ul id="list">
        <!-- ここに追加データが挿入される -->
    </ul>
    <footer>
        My memo pad
    </footer>
    <script>
        //1. Save クリックイベント
        $("#save").on('click', function () {
            const key = $("#title").val();
            const data = {
                product: $("#product").val(),
                price: $("#price").val(),
                store: $("#store").val(),
                memo: $("#memo").val()
            };

            localStorage.setItem(key, JSON.stringify(data));

            const html = `
                <li>
                    <p>${key}</p>
                    <p>${data.product}</p>
                    <p>${data.price}</p>
                    <p>${data.store}</p>
                    <p>${data.memo}</p>
                </li>
            `;
            $("#list").append(html);
        });

        //2. Clear クリックイベント
        $("#clear").on('click', function () {
            localStorage.clear();
            $("#list").empty();
        });

        //3. ページ読み込み時に保存データを表示
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const data = JSON.parse(localStorage.getItem(key));

            const html = `
                <li>
                    <p>${key}</p>
                    <p>${data.product}</p>
                    <p>${data.price}</p>
                    <p>${data.store}</p>
                    <p>${data.memo}</p>
                </li>
            `;
            $("#list").append(html);
        }
    </script>
</body>

</html>